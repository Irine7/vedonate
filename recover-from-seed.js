// Script to recover private key from seed phrase (simplified version)
const crypto = require('crypto');

// WARNING: This is only for demonstration!
// In real use, NEVER store seed phrases in code!

function recoverPrivateKeyFromSeed(seedPhrase) {
	console.log('ğŸ” Recovering private key from seed phrase...');
	console.log(
		'âš ï¸ WARNING: Do not use this script with real seed phrases in production!'
	);
	console.log('');

	// Target address
	const targetAddress = '0xb302484fc7cbecad3983E6C33efE28C3286972f6';

	try {
		// Simple generation based on seed phrase
		// In real application, use BIP39 and BIP32
		const seedHash = crypto.createHash('sha256').update(seedPhrase).digest();

		console.log('ğŸ“ Seed phrase:', seedPhrase);
		console.log('ğŸ¯ Target address:', targetAddress);
		console.log('');

		// Check several generation variations
		const variations = [
			// Variant 1: Direct hash
			seedHash,
			// Variant 2: Hash with "0"
			crypto
				.createHash('sha256')
				.update(seedPhrase + '0')
				.digest(),
			// Variant 3: Hash with "1"
			crypto
				.createHash('sha256')
				.update(seedPhrase + '1')
				.digest(),
			// Variant 4: Hash with "m/44'/818'/0'/0/0"
			crypto
				.createHash('sha256')
				.update(seedPhrase + "m/44'/818'/0'/0/0")
				.digest(),
		];

		for (let i = 0; i < variations.length; i++) {
			const privateKeyBytes = variations[i];
			const privateKey = '0x' + privateKeyBytes.toString('hex');

			// Generate address (simplified version)
			const publicKey = crypto
				.createHash('sha256')
				.update(privateKeyBytes)
				.digest('hex');
			const address = '0x' + publicKey.slice(-40);

			console.log(`ğŸ”‘ Variant ${i + 1}:`);
			console.log(`   Private key: ${privateKey}`);
			console.log(`   Address: ${address}`);

			if (address.toLowerCase() === targetAddress.toLowerCase()) {
				console.log('');
				console.log('âœ… FOUND! Private key for target address:');
				console.log(`   ${privateKey}`);
				console.log('');
				console.log('ğŸš€ Now you can use:');
				console.log(
					`   PRIVATE_KEY=${privateKey} node register-donor-with-key.js`
				);
				console.log('');
				console.log('âš ï¸ IMPORTANT:');
				console.log('   - This key is only for testing!');
				console.log('   - Make sure you have VET for gas payment');
				console.log('   - Check the balance in explorer');

				return privateKey;
			}
			console.log('');
		}

		console.log('âŒ Private key not found for specified address.');
		console.log('ğŸ’¡ Possible reasons:');
		console.log('   - Incorrect seed phrase');
		console.log('   - Address is generated by another algorithm');
		console.log('   - You need to use the full BIP39/BIP32 implementation');
		console.log('');
		console.log('ğŸ”§ Alternative solutions:');
		console.log(
			'   1. Use VeWorld wallet to export private key'
		);
		console.log(
			'   2. Create a new test wallet: node create-test-wallet.js'
		);
		console.log('   3. Use web application VeDonate for registration');
	} catch (error) {
		console.error('âŒ Error during recovery:', error.message);
	}
}

// Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ñ Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ğ²Ğ²Ğ¾Ğ´Ğ°
async function interactiveRecovery() {
	console.log('ğŸ” Recovering private key from seed phrase');
	console.log('');
	console.log('âš ï¸ WARNING:');
	console.log('   - This script is only for demonstration!');
	console.log('   - Do not use with real seed phrases in production!');
	console.log('   - Use only for test wallets!');
	console.log('');

	// Ğ’ Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğ¸ Ğ·Ğ´ĞµÑÑŒ Ğ±Ñ‹Ğ» Ğ±Ñ‹ Ğ²Ğ²Ğ¾Ğ´ Ğ¾Ñ‚ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
	// Ğ”Ğ»Ñ Ğ´ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€
	const exampleSeed =
		'abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about';

	console.log('ğŸ“ Example seed phrase (12 words):');
	console.log(`   ${exampleSeed}`);
	console.log('');

	console.log('ğŸ’¡ For using with your seed phrase:');
	console.log('   1. Replace the seedPhrase variable in the code');
	console.log('   2. Or use VeWorld wallet to export key');
	console.log('');

	// Show how it works with an example
	recoverPrivateKeyFromSeed(exampleSeed);
}

// Check if the seed phrase was passed as an argument
if (process.argv.length > 2) {
	const seedPhrase = process.argv.slice(2).join(' ');
	console.log('ğŸ” Using the passed seed phrase...');
	recoverPrivateKeyFromSeed(seedPhrase);
} else {
	console.log('ğŸ”§ Usage:');
	console.log('   node recover-from-seed.js "your seed phrase here"');
	console.log('');
	interactiveRecovery();
}
